---
isChild: true
---

## Кэширование объектов {#object_caching_title}

Бывают моменты, когда вам необходимо кэшировать определенные объекты в вашем коде, такие как данные, которые неразумно
получать еще раз из базы данных, когда результат вряд ли изменится. Вы можете использовать ПО для кэширования для 
сохранения этих кусочков данных в памяти, для чрезвычайно быстрого доступа к ним позже. Если вы сохраните эти объекты
в хранилище данных и после получите их и выдадите их напрямую из кэша для некоторых запросов, вы можете получить
существенное улучшение производительности, так-же как и уменьшение нагрузки на сервер базы данных.

Множество популярных решений для кэширования байткода, так-же дают вам кэшировать данные, поэтому нет причин, чтобы
не воспользываться ими. APC, XCache, и WinCache все предоставляют API для сохранения данных из вашего PHP кода в
их кэш в памяти.

Самая часто-используемая система кэширования объектов APC и memcached. APC - идеальный выбор для кэширования объектов,
он включает простой API для добавления ваших данных его кэш памяти и он очень прост для установки и использования.
Единственное существующее ограничение APC, в том, что он привязан к серверу на котором установлен. Memcached в своё
время, устанавливается, как отдельный сервис, и к нему можно получить доступ по сети, что означает, то что вы можете
хранить объекты в очень быстро хранилище данных в центральном месте и множество других систем могут получать эти
данные из него.

Учтите, если PHP запущен как (Fast-)CGI приложение внутри вашего веб-сервера, каждый PHP процесс будет иметь 
собственный кэш, например APC данные не будут расшарены между вашими процессами. В этом случае, вы наверное
подумаете об исопльзование вместо него memcached, так как он не ограничен процессом PHP.

В сетевой конфигурации APC, зачастую обгонит memcached в плане скорости доступа, но memcached будет иметь возможность
масштабироваться быстрее и дальше. Если вы не ожидаете иметь несколько серверов с вашим запущенным приложением, или
вам не нужны дополнительные возможности memcached, тогда APC ваш лучший выбор для кэширования объектов.

Простая логика, используя APC:

{% highlight php %}
<?php
// проверяем есть ли данные сохраненный как 'expensive_data' в кэше
$data = apc_fetch('expensive_data');
if ($data === false) {
    // данных нет в кэше; сохраняем результат вызова функции для дальнейшего использования
    apc_add('expensive_data', $data = get_expensive_data());
}

print_r($data);
{% endhighlight %}

Подробнее о популярных системах кэширования объектов:

* [Функции APC](http://php.net/manual/ru/ref.apc.php)
* [Memcached](http://memcached.org/)
* [Redis](http://redis.io/)
* [XCache API](http://xcache.lighttpd.net/wiki/XcacheApi)
* [Функции WinCache](http://www.php.net/manual/ru/ref.wincache.php)
