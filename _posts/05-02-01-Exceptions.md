---
title: Исключения
isChild: true
---

## Исключения

Исключения являются неотъемлимой частью большинства популярных языков программирования, но их часто обделяют вниманием разработчики PHP.
Языки, подобные Ruby, чрезвычайно подробно обрабатывают Исключения, поэтому, когда что-то идет не так, как например HTTP запрос не удался, или запрос к базе данных происходит неправильно, или даже если изображение не может быть найдено, Ruby (или гемы, которые используется) выдадут(выбросят-throw) исключение на экран, которое сразу даст понять, где допущена ошибка.

PHP сам по себе, довольно слаб в этом, и вызов `file_get_contents()`, как правило даст вам только `FALSE` и предупреждение.
Многие старые PHP фрэймворки, как CodeIgniter, просто вернут false, добавят сообщение в свой собственный журнал и может быть 
дадут вам использовать метод, как `$this->upload->get_error()`, чтобы посмотреть, что пошло не так.
Проблема в том, что вы должны искать ошибку и проверять документацию, чтобы понять, какой ошибочный метод существует в этом классе, вместо того, чтобы сделать это всё более очевидным.

Еще одна проблема, когда классы автоматически выдают ошибку на экран и закрывают процесс. Когда вы делаете это, вы не даете другому разработчику динамически обработать эту ошибку. Исключения должны быть выданы(выброшены-throw), чтобыы дать разработчику знать об ошибку, чтобы они могли выбрать, как обработать это. Например:

{% highlight php %}
<?php
$email = new Fuel\Email;
$email->subject('Моя тема');
$email->body('Как ты, чёрт возьми??');
$email->to('guy@example.com', 'Некоторый парень');

try
{
    $email->send();
}
catch(Fuel\Email\ValidationFailedException $e)
{
    // Валидация не удалась
}
catch(Fuel\Email\SendingFailedException $e)
{
    // Драйвер не может отправить сообщение
}
{% endhighlight %}

### Исключения SPL

Исключение по умолчанию не имеет смысла, но наиболее распространенным путем, для придания смысла, является установка его названия:

{% highlight php %}
<?php
class ValidationException extends Exception {}
{% endhighlight %}

Это означает, что вы можете добавить несколько блоков отлова и обработки разных Исключений, по-разному. Это может привести к созданию <em>множества</em> определенных Исключения, некоторые из которых некоторые из которых можно было бы избежать, используя Исключения SPL предоставляемы [расширением SPL][splext].

Например, вы используете магический метод `__call()` и был запрошен неправильный метод, тогда вместо выдачи(выброса-throw) обычного Исключения, которое расплывчато, или создания пользовательского исключения для этого, вы можете просто `throw new BadFunctionCallException;`.

* [Подробнее об исключениях][exceptions]
* [Подробнее о расширении SPL][splexe]
* [Вложенные исключения PHP][nesting-exceptions-in-php]
* [Лучшие практики исключений в PHP 5.3][exception-best-practices53]

[exceptions]: http://php.net/manual/ru/language.exceptions.php
[splexe]: http://php.net/manual/ru/spl.exceptions.php
[splext]: /#standard_php_library
[exception-best-practices53]: http://ralphschindler.com/2010/09/15/exception-best-practices-in-php-5-3
[nesting-exceptions-in-php]: http://www.brandonsavage.net/exceptional-php-nesting-exceptions-in-php/
